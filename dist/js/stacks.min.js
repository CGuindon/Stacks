!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Stimulus={})}(this,function(t){"use strict";var r=function(){function t(t,e){this.eventTarget=t,this.eventName=e,this.unorderedBindings=new Set}return t.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,!1)},t.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,!1)},t.prototype.bindingConnected=function(t){this.unorderedBindings.add(t)},t.prototype.bindingDisconnected=function(t){this.unorderedBindings.delete(t)},t.prototype.handleEvent=function(t){for(var e=function(t){{if("immediatePropagationStopped"in t)return t;var e=t.stopImmediatePropagation;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,e.call(this)}})}}(t),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(e.immediatePropagationStopped)break;o.handleEvent(e)}},Object.defineProperty(t.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(t,e){var n=t.index,r=e.index;return n<r?-1:r<n?1:0})},enumerable:!0,configurable:!0}),t}();var n=function(){function t(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}return t.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(t){return t.connect()}))},t.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(t){return t.disconnect()}))},Object.defineProperty(t.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(t,e){return t.concat(Array.from(e.values()))},[])},enumerable:!0,configurable:!0}),t.prototype.bindingConnected=function(t){this.fetchEventListenerForBinding(t).bindingConnected(t)},t.prototype.bindingDisconnected=function(t){this.fetchEventListenerForBinding(t).bindingDisconnected(t)},t.prototype.handleError=function(t,e,n){void 0===n&&(n={}),this.application.handleError(t,"Error "+e,n)},t.prototype.fetchEventListenerForBinding=function(t){var e=t.eventTarget,n=t.eventName;return this.fetchEventListener(e,n)},t.prototype.fetchEventListener=function(t,e){var n=this.fetchEventListenerMapForEventTarget(t),r=n.get(e);return r||(r=this.createEventListener(t,e),n.set(e,r)),r},t.prototype.createEventListener=function(t,e){var n=new r(t,e);return this.started&&n.connect(),n},t.prototype.fetchEventListenerMapForEventTarget=function(t){var e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e},t}(),o=/^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;function e(t){var e=t.trim().match(o)||[];return{eventTarget:function(t){{if("window"==t)return window;if("document"==t)return document}}(e[4]),eventName:e[2],identifier:e[5],methodName:e[7]}}var i=function(){function t(t,e,n){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||function(t){var e=t.tagName.toLowerCase();if(e in s)return s[e](t)}(t)||a("missing event name"),this.identifier=n.identifier||a("missing identifier"),this.methodName=n.methodName||a("missing method name")}return t.forToken=function(t){return new this(t.element,t.index,e(t.content))},t.prototype.toString=function(){var t=this.eventTargetName?"@"+this.eventTargetName:"";return""+this.eventName+t+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(t.prototype,"eventTargetName",{get:function(){return(t=this.eventTarget)==window?"window":t==document?"document":void 0;var t},enumerable:!0,configurable:!0}),t}(),s={a:function(t){return"click"},button:function(t){return"click"},form:function(t){return"submit"},input:function(t){return"submit"==t.getAttribute("type")?"click":"change"},select:function(t){return"change"},textarea:function(t){return"change"}};function a(t){throw new Error(t)}var c=function(){function t(t,e){this.context=t,this.action=e}return Object.defineProperty(t.prototype,"index",{get:function(){return this.action.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(t){this.willBeInvokedByEvent(t)&&this.invokeWithEvent(t)},Object.defineProperty(t.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){var t=this.controller[this.methodName];if("function"==typeof t)return t;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!0,configurable:!0}),t.prototype.invokeWithEvent=function(e){try{this.method.call(this.controller,e)}catch(t){var n=this,r={identifier:n.identifier,controller:n.controller,element:n.element,index:n.index,event:e};this.context.handleError(t,'invoking action "'+this.action+'"',r)}},t.prototype.willBeInvokedByEvent=function(t){var e=t.target;return this.element===e||(!(e instanceof Element&&this.element.contains(e))||this.scope.containsElement(e))},Object.defineProperty(t.prototype,"controller",{get:function(){return this.context.controller},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),t}(),u=function(){function t(t,e){var n=this;this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(function(t){return n.processMutations(t)})}return t.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},t.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},t.prototype.refresh=function(){if(this.started){for(var t=new Set(this.matchElementsInTree()),e=0,n=Array.from(this.elements);e<n.length;e++){var r=n[e];t.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(t);o<i.length;o++){r=i[o];this.addElement(r)}}},t.prototype.processMutations=function(t){if(this.started)for(var e=0,n=t;e<n.length;e++){var r=n[e];this.processMutation(r)}},t.prototype.processMutation=function(t){"attributes"==t.type?this.processAttributeChange(t.target,t.attributeName):"childList"==t.type&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))},t.prototype.processAttributeChange=function(t,e){var n=t;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,e):this.removeElement(n):this.matchElement(n)&&this.addElement(n)},t.prototype.processRemovedNodes=function(t){for(var e=0,n=Array.from(t);e<n.length;e++){var r=n[e],o=this.elementFromNode(r);o&&this.processTree(o,this.removeElement)}},t.prototype.processAddedNodes=function(t){for(var e=0,n=Array.from(t);e<n.length;e++){var r=n[e],o=this.elementFromNode(r);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}},t.prototype.matchElement=function(t){return this.delegate.matchElement(t)},t.prototype.matchElementsInTree=function(t){return void 0===t&&(t=this.element),this.delegate.matchElementsInTree(t)},t.prototype.processTree=function(t,e){for(var n=0,r=this.matchElementsInTree(t);n<r.length;n++){var o=r[n];e.call(this,o)}},t.prototype.elementFromNode=function(t){if(t.nodeType==Node.ELEMENT_NODE)return t},t.prototype.elementIsActive=function(t){return t.isConnected==this.element.isConnected&&this.element.contains(t)},t.prototype.addElement=function(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))},t.prototype.removeElement=function(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))},t}(),l=function(){function t(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new u(t,this)}return Object.defineProperty(t.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.elementObserver.start()},t.prototype.stop=function(){this.elementObserver.stop()},t.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(t.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),t.prototype.matchElement=function(t){return t.hasAttribute(this.attributeName)},t.prototype.matchElementsInTree=function(t){var e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)},t.prototype.elementMatched=function(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)},t.prototype.elementUnmatched=function(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)},t.prototype.elementAttributeChanged=function(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)},t}();function p(t,e,n){h(t,e).add(n)}function f(t,e,n){var r,o,i;h(t,e).delete(n),o=e,null!=(i=(r=t).get(o))&&0==i.size&&r.delete(o)}function h(t,e){var n=t.get(e);return n||(n=new Set,t.set(e,n)),n}var d,m=function(){function t(){this.valuesByKey=new Map}return Object.defineProperty(t.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(t,e){return t.concat(Array.from(e))},[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(t,e){return t+e.size},0)},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){p(this.valuesByKey,t,e)},t.prototype.delete=function(t,e){f(this.valuesByKey,t,e)},t.prototype.has=function(t,e){var n=this.valuesByKey.get(t);return null!=n&&n.has(e)},t.prototype.hasKey=function(t){return this.valuesByKey.has(t)},t.prototype.hasValue=function(e){return Array.from(this.valuesByKey.values()).some(function(t){return t.has(e)})},t.prototype.getValuesForKey=function(t){var e=this.valuesByKey.get(t);return e?Array.from(e):[]},t.prototype.getKeysForValue=function(e){return Array.from(this.valuesByKey).filter(function(t){t[0];return t[1].has(e)}).map(function(t){var e=t[0];t[1];return e})},t}(),v=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=(function(n){function t(){var t=n.call(this)||this;return t.keysByValue=new Map,t}v(t,n),Object.defineProperty(t.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){n.prototype.add.call(this,t,e),p(this.keysByValue,e,t)},t.prototype.delete=function(t,e){n.prototype.delete.call(this,t,e),f(this.keysByValue,e,t)},t.prototype.hasValue=function(t){return this.keysByValue.has(t)},t.prototype.getKeysForValue=function(t){var e=this.keysByValue.get(t);return e?Array.from(e):[]}}(m),function(){function t(t,e,n){this.attributeObserver=new l(t,e,this),this.delegate=n,this.tokensByElement=new m}return Object.defineProperty(t.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.attributeObserver.start()},t.prototype.stop=function(){this.attributeObserver.stop()},t.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(t.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!0,configurable:!0}),t.prototype.elementMatchedAttribute=function(t){this.tokensMatched(this.readTokensForElement(t))},t.prototype.elementAttributeValueChanged=function(t){var e=this.refreshTokensForElement(t),n=e[0],r=e[1];this.tokensUnmatched(n),this.tokensMatched(r)},t.prototype.elementUnmatchedAttribute=function(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))},t.prototype.tokensMatched=function(t){var e=this;t.forEach(function(t){return e.tokenMatched(t)})},t.prototype.tokensUnmatched=function(t){var e=this;t.forEach(function(t){return e.tokenUnmatched(t)})},t.prototype.tokenMatched=function(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)},t.prototype.tokenUnmatched=function(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)},t.prototype.refreshTokensForElement=function(t){var n,r,e,o=this.tokensByElement.getValuesForKey(t),i=this.readTokensForElement(t),s=(n=o,r=i,e=Math.max(n.length,r.length),Array.from({length:e},function(t,e){return[n[e],r[e]]})).findIndex(function(t){var e,n,r=t[0],o=t[1];return n=o,!((e=r)&&n&&e.index==n.index&&e.content==n.content)});return-1==s?[[],[]]:[o.slice(s),i.slice(s)]},t.prototype.readTokensForElement=function(t){var n,r,e=this.attributeName,o=t.getAttribute(e)||"";return n=t,r=e,o.trim().split(/\s+/).filter(function(t){return t.length}).map(function(t,e){return{element:n,attributeName:r,content:t,index:e}})},t}());var g,b=function(){function t(t,e,n){this.tokenListObserver=new y(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(t.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.tokenListObserver.start()},t.prototype.stop=function(){this.tokenListObserver.stop()},t.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(t.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!0,configurable:!0}),t.prototype.tokenMatched=function(t){var e=t.element,n=this.fetchParseResultForToken(t).value;n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))},t.prototype.tokenUnmatched=function(t){var e=t.element,n=this.fetchParseResultForToken(t).value;n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))},t.prototype.fetchParseResultForToken=function(t){var e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e},t.prototype.fetchValuesByTokenForElement=function(t){var e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e},t.prototype.parseToken=function(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(t){return{error:t}}},t}(),E=function(){function t(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}return t.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new b(this.element,this.actionAttribute,this),this.valueListObserver.start())},t.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(t.prototype,"element",{get:function(){return this.context.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.context.schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!0,configurable:!0}),t.prototype.connectAction=function(t){var e=new c(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)},t.prototype.disconnectAction=function(t){var e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))},t.prototype.disconnectAllActions=function(){var e=this;this.bindings.forEach(function(t){return e.delegate.bindingDisconnected(t)}),this.bindingsByAction.clear()},t.prototype.parseValueForToken=function(t){var e=i.forToken(t);if(e.identifier==this.identifier)return e},t.prototype.elementMatchedValue=function(t,e){this.connectAction(e)},t.prototype.elementUnmatchedValue=function(t,e){this.disconnectAction(e)},t}(),w=function(){function t(t,e){this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new E(this,this.dispatcher);try{this.controller.initialize()}catch(t){this.handleError(t,"initializing controller")}}return t.prototype.connect=function(){this.bindingObserver.start();try{this.controller.connect()}catch(t){this.handleError(t,"connecting controller")}},t.prototype.disconnect=function(){try{this.controller.disconnect()}catch(t){this.handleError(t,"disconnecting controller")}this.bindingObserver.stop()},Object.defineProperty(t.prototype,"application",{get:function(){return this.module.application},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!0,configurable:!0}),t.prototype.handleError=function(t,e,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(t,"Error "+e,n)},t}(),O=(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function A(t){return{identifier:t.identifier,controllerConstructor:(e=t.controllerConstructor,n=k(e),n.bless(),n)};var e,n}var k=function(){function t(e){function n(){var t=this&&this instanceof n?this.constructor:void 0;return Reflect.construct(e,arguments,t)}return n.prototype=Object.create(e.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,e),n}try{return(e=t(function(){this.a.call(this)})).prototype.a=function(){},new e,t}catch(t){return function(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e}(t)}}var e}(),x=function(){function t(t,e){this.application=t,this.definition=A(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!0,configurable:!0}),t.prototype.connectContextForScope=function(t){var e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()},t.prototype.disconnectContextForScope=function(t){var e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())},t.prototype.fetchContextForScope=function(t){var e=this.contextsByScope.get(t);return e||(e=new w(this,t),this.contextsByScope.set(t,e)),e},t}(),C=function(){function t(t){this.scope=t}return Object.defineProperty(t.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return t=this.getFormattedKey(t),this.element.getAttribute(t)},t.prototype.set=function(t,e){return t=this.getFormattedKey(t),this.element.setAttribute(t,e),this.get(t)},t.prototype.has=function(t){return t=this.getFormattedKey(t),this.element.hasAttribute(t)},t.prototype.delete=function(t){return!!this.has(t)&&(t=this.getFormattedKey(t),this.element.removeAttribute(t),!0)},t.prototype.getFormattedKey=function(t){return"data-"+this.identifier+"-"+t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})},t}();function _(t,e){return"["+t+'~="'+e+'"]'}var P=function(){function t(t){this.scope=t}return Object.defineProperty(t.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return null!=this.find(t)},t.prototype.find=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getSelectorForTargetNames(t);return this.scope.findElement(n)},t.prototype.findAll=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getSelectorForTargetNames(t);return this.scope.findAllElements(n)},t.prototype.getSelectorForTargetNames=function(t){var e=this;return t.map(function(t){return e.getSelectorForTargetName(t)}).join(", ")},t.prototype.getSelectorForTargetName=function(t){var e=this.identifier+"."+t;return _(this.schema.targetAttribute,e)},t}(),T=function(){function t(t,e,n){this.schema=t,this.identifier=e,this.element=n,this.targets=new P(this),this.data=new C(this)}return t.prototype.findElement=function(t){return this.findAllElements(t)[0]},t.prototype.findAllElements=function(t){var e=this.element.matches(t)?[this.element]:[],n=this.filterElements(Array.from(this.element.querySelectorAll(t)));return e.concat(n)},t.prototype.filterElements=function(t){var e=this;return t.filter(function(t){return e.containsElement(t)})},t.prototype.containsElement=function(t){return t.closest(this.controllerSelector)===this.element},Object.defineProperty(t.prototype,"controllerSelector",{get:function(){return _(this.schema.controllerAttribute,this.identifier)},enumerable:!0,configurable:!0}),t}(),L=function(){function t(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new b(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return t.prototype.start=function(){this.valueListObserver.start()},t.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(t.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),t.prototype.parseValueForToken=function(t){var e=t.element,n=t.content,r=this.fetchScopesByIdentifierForElement(e),o=r.get(n);return o||(o=new T(this.schema,n,e),r.set(n,o)),o},t.prototype.elementMatchedValue=function(t,e){var n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),1==n&&this.delegate.scopeConnected(e)},t.prototype.elementUnmatchedValue=function(t,e){var n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),1==n&&this.delegate.scopeDisconnected(e))},t.prototype.fetchScopesByIdentifierForElement=function(t){var e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e},t}(),S=function(){function t(t){this.application=t,this.scopeObserver=new L(this.element,this.schema,this),this.scopesByIdentifier=new m,this.modulesByIdentifier=new Map}return Object.defineProperty(t.prototype,"element",{get:function(){return this.application.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contexts",{get:function(){return this.modules.reduce(function(t,e){return t.concat(e.contexts)},[])},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.scopeObserver.start()},t.prototype.stop=function(){this.scopeObserver.stop()},t.prototype.loadDefinition=function(t){this.unloadIdentifier(t.identifier);var e=new x(this.application,t);this.connectModule(e)},t.prototype.unloadIdentifier=function(t){var e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)},t.prototype.getContextForElementAndIdentifier=function(e,t){var n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(function(t){return t.element==e})},t.prototype.handleError=function(t,e,n){this.application.handleError(t,e,n)},t.prototype.scopeConnected=function(t){this.scopesByIdentifier.add(t.identifier,t);var e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)},t.prototype.scopeDisconnected=function(t){this.scopesByIdentifier.delete(t.identifier,t);var e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)},t.prototype.connectModule=function(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(function(t){return e.connectContextForScope(t)})},t.prototype.disconnectModule=function(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(function(t){return e.disconnectContextForScope(t)})},t}(),B={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},j=function(i,s,a,c){return new(a||(a=Promise))(function(t,e){function n(t){try{o(c.next(t))}catch(t){e(t)}}function r(t){try{o(c.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},F=function(n,r){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},M=function(){function r(t,e){void 0===t&&(t=document.documentElement),void 0===e&&(e=B),this.element=t,this.schema=e,this.dispatcher=new n(this),this.router=new S(this)}return r.start=function(t,e){var n=new r(t,e);return n.start(),n},r.prototype.start=function(){return j(this,void 0,void 0,function(){return F(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",t):t()})];case 1:return t.sent(),this.router.start(),this.dispatcher.start(),[2]}})})},r.prototype.stop=function(){this.router.stop(),this.dispatcher.stop()},r.prototype.register=function(t,e){this.load({identifier:t,controllerConstructor:e})},r.prototype.load=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(t)?t:[t].concat(n)).forEach(function(t){return e.router.loadDefinition(t)})},r.prototype.unload=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(t)?t:[t].concat(n)).forEach(function(t){return e.router.unloadIdentifier(t)})},Object.defineProperty(r.prototype,"controllers",{get:function(){return this.router.contexts.map(function(t){return t.controller})},enumerable:!0,configurable:!0}),r.prototype.getControllerForElementAndIdentifier=function(t,e){var n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null},r.prototype.handleError=function(t,e,n){console.error("%s\n\n%o\n\n%o",e,t,n)},r}();function N(t){var e,i=t.prototype;(e=function(t){var e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e}(t),Array.from(e.reduce(function(e,t){var n,r;return(n=t,r=n.targets,Array.isArray(r)?r:[]).forEach(function(t){return e.add(t)}),e},new Set))).forEach(function(e){var t,n,r,o;return n=i,(t={})[e+"Target"]={get:function(){var t=this.targets.find(e);if(t)return t;throw new Error('Missing target element "'+this.identifier+"."+e+'"')}},t[e+"Targets"]={get:function(){return this.targets.findAll(e)}},t["has"+(o=e,o.charAt(0).toUpperCase()+o.slice(1))+"Target"]={get:function(){return this.targets.has(e)}},r=t,void Object.keys(r).forEach(function(t){if(!(t in n)){var e=r[t];Object.defineProperty(n,t,e)}})})}var I=function(){function t(t){this.context=t}return t.bless=function(){N(this)},Object.defineProperty(t.prototype,"application",{get:function(){return this.context.application},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.scope.data},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){},t.prototype.connect=function(){},t.prototype.disconnect=function(){},t.targets=[],t}();t.Application=M,t.Context=w,t.Controller=I,t.defaultSchema=B,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";for(var t="undefined"!=typeof window&&"undefined"!=typeof document,e=["Edge","Trident","Firefox"],n=0,r=0;r<e.length;r+=1)if(t&&0<=navigator.userAgent.indexOf(e[r])){n=1;break}var s=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},n))}};function a(t){return t&&"[object Function]"==={}.toString.call(t)}function E(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function h(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function d(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=E(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/(auto|scroll|overlay)/.test(n+o+r)?t:d(h(t))}var o=t&&!(!window.MSInputMethodContext||!document.documentMode),i=t&&/MSIE 10/.test(navigator.userAgent);function m(t){return 11===t?o:10===t?i:o||i}function j(t){if(!t)return document.documentElement;for(var e=m(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===E(n,"position")?j(n):n:t?t.ownerDocument.documentElement:document.documentElement}function l(t){return null!==t.parentNode?l(t.parentNode):t}function v(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,o=n?e:t,i=document.createRange();i.setStart(r,0),i.setEnd(o,0);var s,a,c=i.commonAncestorContainer;if(t!==c&&e!==c||r.contains(o))return"BODY"===(a=(s=c).nodeName)||"HTML"!==a&&j(s.firstElementChild)!==s?j(c):c;var u=l(t);return u.host?v(u.host,e):v(t,l(e).host)}function y(t){var e="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[e]}return t[e]}function p(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function c(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],m(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function g(t){var e=t.body,n=t.documentElement,r=m(10)&&getComputedStyle(n);return{height:c("Height",e,n,r),width:c("Width",e,n,r)}}var u=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),w=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},F=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function O(t){return F({},t,{right:t.left+t.width,bottom:t.top+t.height})}function M(t){var e={};try{if(m(10)){e=t.getBoundingClientRect();var n=y(t,"top"),r=y(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var o={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i="HTML"===t.nodeName?g(t.ownerDocument):{},s=i.width||t.clientWidth||o.right-o.left,a=i.height||t.clientHeight||o.bottom-o.top,c=t.offsetWidth-s,u=t.offsetHeight-a;if(c||u){var l=E(t);c-=p(l,"x"),u-=p(l,"y"),o.width-=c,o.height-=u}return O(o)}function b(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=m(10),o="HTML"===e.nodeName,i=M(t),s=M(e),a=d(t),c=E(e),u=parseFloat(c.borderTopWidth,10),l=parseFloat(c.borderLeftWidth,10);n&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=O({top:i.top-s.top-u,left:i.left-s.left-l,width:i.width,height:i.height});if(p.marginTop=0,p.marginLeft=0,!r&&o){var f=parseFloat(c.marginTop,10),h=parseFloat(c.marginLeft,10);p.top-=u-f,p.bottom-=u-f,p.left-=l-h,p.right-=l-h,p.marginTop=f,p.marginLeft=h}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(p=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=y(e,"top"),o=y(e,"left"),i=n?-1:1;return t.top+=r*i,t.bottom+=r*i,t.left+=o*i,t.right+=o*i,t}(p,e)),p}function A(t){if(!t||!t.parentElement||m())return document.documentElement;for(var e=t.parentElement;e&&"none"===E(e,"transform");)e=e.parentElement;return e||document.documentElement}function f(t,e,n,r){var o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},s=o?A(t):v(t,e);if("viewport"===r)i=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=b(t,n),o=Math.max(n.clientWidth,window.innerWidth||0),i=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:y(n),a=e?0:y(n,"left");return O({top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:o,height:i})}(s,o);else{var a=void 0;"scrollParent"===r?"BODY"===(a=d(h(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===r?t.ownerDocument.documentElement:r;var c=b(a,s,o);if("HTML"!==a.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===E(e,"position"))return!0;var r=h(e);return!!r&&t(r)}(s))i=c;else{var u=g(t.ownerDocument),l=u.height,p=u.width;i.top+=c.top-c.marginTop,i.bottom=l+c.top,i.left+=c.left-c.marginLeft,i.right=p+c.left}}var f="number"==typeof(n=n||0);return i.left+=f?n:n.left||0,i.top+=f?n:n.top||0,i.right-=f?n:n.right||0,i.bottom-=f?n:n.bottom||0,i}function k(t,e,r,n,o){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=f(r,n,i,o),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},c=Object.keys(a).map(function(t){return F({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e}).sort(function(t,e){return e.area-t.area}),u=c.filter(function(t){var e=t.width,n=t.height;return e>=r.clientWidth&&n>=r.clientHeight}),l=0<u.length?u[0].key:c[0].key,p=t.split("-")[1];return l+(p?"-"+p:"")}function x(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return b(n,r?A(e):v(e,n),r)}function C(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function _(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function P(t,e,n){n=n.split("-")[0];var r=C(t),o={width:r.width,height:r.height},i=-1!==["right","left"].indexOf(n),s=i?"top":"left",a=i?"left":"top",c=i?"height":"width",u=i?"width":"height";return o[s]=e[s]+e[c]/2-r[c]/2,o[a]=n===a?e[a]-r[u]:e[_(a)],o}function N(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function T(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var r=N(t,function(t){return t[e]===n});return t.indexOf(r)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&a(e)&&(n.offsets.popper=O(n.offsets.popper),n.offsets.reference=O(n.offsets.reference),n=e(n,t))}),n}function L(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function I(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var o=e[r],i=o?""+o+n:t;if(void 0!==document.body.style[i])return i}return null}function S(t){var e=t.ownerDocument;return e?e.defaultView:window}function B(t,e,n,r){n.updateBound=r,S(t).addEventListener("resize",n.updateBound,{passive:!0});var o=d(t);return function t(e,n,r,o){var i="BODY"===e.nodeName,s=i?e.ownerDocument.defaultView:e;s.addEventListener(n,r,{passive:!0}),i||t(d(s.parentNode),n,r,o),o.push(s)}(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function D(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,S(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function H(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function V(n,r){Object.keys(r).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&H(r[t])&&(e="px"),n.style[t]=r[t]+e})}var U=t&&/Firefox/i.test(navigator.userAgent);function R(t,e,n){var r=N(t,function(t){return t.name===e}),o=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});if(!o){var i="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}var W=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],K=W.slice(3);function z(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=K.indexOf(t),r=K.slice(n+1).concat(K.slice(0,n));return e?r.reverse():r}var q="flip",Y="clockwise",G="counterclockwise";function X(t,o,i,e){var s=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),r=n.indexOf(N(n,function(t){return-1!==t.search(/,|\s/)}));n[r]&&-1===n[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=-1!==r?[n.slice(0,r).concat([n[r].split(c)[0]]),[n[r].split(c)[1]].concat(n.slice(r+1))]:[n];return(u=u.map(function(t,e){var n=(1===e?!a:a)?"height":"width",r=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,r=!0,t):r?(t[t.length-1]+=e,r=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,r){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],s=o[2];if(!i)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}return O(a)[e]/100*i}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i;return i}(t,n,o,i)})})).forEach(function(n,r){n.forEach(function(t,e){H(t)&&(s[r]+=t*("-"===n[e-1]?-1:1))})}),s}var Z={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var o=t.offsets,i=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),c=a?"left":"top",u=a?"width":"height",l={start:w({},c,i[c]),end:w({},c,i[c]+i[u]-s[u])};t.offsets.popper=F({},s,l[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,o=t.offsets,i=o.popper,s=o.reference,a=r.split("-")[0],c=void 0;return c=H(+n)?[+n,0]:X(n,i,s,a),"left"===a?(i.top+=c[0],i.left-=c[1]):"right"===a?(i.top+=c[0],i.left+=c[1]):"top"===a?(i.left+=c[0],i.top-=c[1]):"bottom"===a&&(i.left+=c[0],i.top+=c[1]),t.popper=i,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,r){var e=r.boundariesElement||j(t.instance.popper);t.instance.reference===e&&(e=j(e));var n=I("transform"),o=t.instance.popper.style,i=o.top,s=o.left,a=o[n];o.top="",o.left="",o[n]="";var c=f(t.instance.popper,t.instance.reference,r.padding,e,t.positionFixed);o.top=i,o.left=s,o[n]=a,r.boundaries=c;var u=r.priority,l=t.offsets.popper,p={primary:function(t){var e=l[t];return l[t]<c[t]&&!r.escapeWithReference&&(e=Math.max(l[t],c[t])),w({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=l[e];return l[t]>c[t]&&!r.escapeWithReference&&(n=Math.min(l[e],c[t]-("right"===t?l.width:l.height))),w({},e,n)}};return u.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";l=F({},l,p[e](t))}),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,o=t.placement.split("-")[0],i=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",c=s?"left":"top",u=s?"width":"height";return n[a]<i(r[c])&&(t.offsets.popper[c]=i(r[c])-n[u]),n[c]>i(r[a])&&(t.offsets.popper[c]=i(r[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!R(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],i=t.offsets,s=i.popper,a=i.reference,c=-1!==["left","right"].indexOf(o),u=c?"height":"width",l=c?"Top":"Left",p=l.toLowerCase(),f=c?"left":"top",h=c?"bottom":"right",d=C(r)[u];a[h]-d<s[p]&&(t.offsets.popper[p]-=s[p]-(a[h]-d)),a[p]+d>s[h]&&(t.offsets.popper[p]+=a[p]+d-s[h]),t.offsets.popper=O(t.offsets.popper);var m=a[p]+a[u]/2-d/2,v=E(t.instance.popper),y=parseFloat(v["margin"+l],10),g=parseFloat(v["border"+l+"Width"],10),b=m-t.offsets.popper[p]-y-g;return b=Math.max(Math.min(s[u]-d,b),0),t.arrowElement=r,t.offsets.arrow=(w(n={},p,Math.round(b)),w(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(v,y){if(L(v.instance.modifiers,"inner"))return v;if(v.flipped&&v.placement===v.originalPlacement)return v;var g=f(v.instance.popper,v.instance.reference,y.padding,y.boundariesElement,v.positionFixed),b=v.placement.split("-")[0],E=_(b),w=v.placement.split("-")[1]||"",O=[];switch(y.behavior){case q:O=[b,E];break;case Y:O=z(b);break;case G:O=z(b,!0);break;default:O=y.behavior}return O.forEach(function(t,e){if(b!==t||O.length===e+1)return v;b=v.placement.split("-")[0],E=_(b);var n,r=v.offsets.popper,o=v.offsets.reference,i=Math.floor,s="left"===b&&i(r.right)>i(o.left)||"right"===b&&i(r.left)<i(o.right)||"top"===b&&i(r.bottom)>i(o.top)||"bottom"===b&&i(r.top)<i(o.bottom),a=i(r.left)<i(g.left),c=i(r.right)>i(g.right),u=i(r.top)<i(g.top),l=i(r.bottom)>i(g.bottom),p="left"===b&&a||"right"===b&&c||"top"===b&&u||"bottom"===b&&l,f=-1!==["top","bottom"].indexOf(b),h=!!y.flipVariations&&(f&&"start"===w&&a||f&&"end"===w&&c||!f&&"start"===w&&u||!f&&"end"===w&&l),d=!!y.flipVariationsByContent&&(f&&"start"===w&&c||f&&"end"===w&&a||!f&&"start"===w&&l||!f&&"end"===w&&u),m=h||d;(s||p||m)&&(v.flipped=!0,(s||p)&&(b=O[e+1]),m&&(w="end"===(n=w)?"start":"start"===n?"end":n),v.placement=b+(w?"-"+w:""),v.offsets.popper=F({},v.offsets.popper,P(v.instance.popper,v.offsets.reference,v.placement)),v=T(v.instance.modifiers,v,"flip"))}),v},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,o=r.popper,i=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=i[n]-(a?o[s?"width":"height"]:0),t.placement=_(e),t.offsets.popper=O(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!R(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=N(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,o=t.offsets.popper,i=N(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,c,u,l,p,f,h,d,m,v,y,g,b,E=void 0!==i?i:e.gpuAcceleration,w=j(t.instance.popper),O=M(w),A={position:o.position},k=(s=t,a=window.devicePixelRatio<2||!U,c=s.offsets,u=c.popper,l=c.reference,p=Math.round,f=Math.floor,h=function(t){return t},d=p(l.width),m=p(u.width),v=-1!==["left","right"].indexOf(s.placement),y=-1!==s.placement.indexOf("-"),b=a?p:h,{left:(g=a?v||y||d%2==m%2?p:f:h)(d%2==1&&m%2==1&&!y&&a?u.left-1:u.left),top:b(u.top),bottom:b(u.bottom),right:g(u.right)}),x="bottom"===n?"top":"bottom",C="right"===r?"left":"right",_=I("transform"),P=void 0,T=void 0;if(T="bottom"===x?"HTML"===w.nodeName?-w.clientHeight+k.bottom:-O.height+k.bottom:k.top,P="right"===C?"HTML"===w.nodeName?-w.clientWidth+k.right:-O.width+k.right:k.left,E&&_)A[_]="translate3d("+P+"px, "+T+"px, 0)",A[x]=0,A[C]=0,A.willChange="transform";else{var L="bottom"===x?-1:1,S="right"===C?-1:1;A[x]=T*L,A[C]=P*S,A.willChange=x+", "+C}var B={"x-placement":t.placement};return t.attributes=F({},B,t.attributes),t.styles=F({},A,t.styles),t.arrowStyles=F({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return V(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&V(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,o){var i=x(o,e,t,n.positionFixed),s=k(n.placement,i,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),V(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},$=function(){function i(t,e){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=s(this.update.bind(this)),this.options=F({},i.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(F({},i.Defaults.modifiers,r.modifiers)).forEach(function(t){n.options.modifiers[t]=F({},i.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return F({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&a(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return u(i,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=x(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=k(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=P(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=T(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,L(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[I("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=B(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return D.call(this)}}]),i}();return $.Utils=("undefined"!=typeof window?window:global).PopperUtils,$.placements=W,$.Defaults=Z,$});var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(u){var t=function(c){function r(){return null!==c&&c.apply(this,arguments)||this}return __extends(r,c),r.prototype.load=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=Array.isArray(t)?t:[t].concat(e),o=0,i=r;o<i.length;o++){var s=i[o],a=/^s-/.test(s.identifier);if(u._initializing&&!a)throw'Stacks-created Stimulus controller names must start with "s-".';if(!u._initializing&&a)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}c.prototype.load.call(this,r)},r.start=function(t,e){var n=new r(t,e);return n.start(),n},r}(Stimulus.Application);u.application=t.start(),u._initializing=!0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getElementData=function(t,e){return t.getAttribute("data-"+this.identifier+"-"+e)},e.prototype.setElementData=function(t,e,n){t.setAttribute("data-"+this.identifier+"-"+e,n)},e.prototype.removeElementData=function(t,e){t.removeAttribute("data-"+this.identifier+"-"+e)},e.prototype.triggerEvent=function(t,e,n){var r,o=this.identifier+":"+t;try{r=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:e})}catch(t){(r=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,e)}return(n||this.element).dispatchEvent(r),r},e}(Stimulus.Controller);function n(t){var e,n=t.hasOwnProperty("targets")?((e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(o)).targets=t.targets,e):function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(o);for(var r in t)"targets"!==r&&t.hasOwnProperty(r)&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t,r));return n}u.StacksController=o,u.createController=n,u.addController=function(t,e){u.application.register(t,n(e))}}(Stacks||(Stacks={})),function(t){var e=function(){function t(t,e){this.element=t,this.attribute=e}return Object.defineProperty(t.prototype,"tokens",{get:function(){return(this.element.getAttribute(this.attribute)||"").trim().split(/\s+/).filter(function(t){return 0<t.length})},set:function(t){this.element.setAttribute(this.attribute,t.join(" "))},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this.tokens;e.includes(t)||(e.push(t),this.tokens=e)},t.prototype.remove=function(e){var t=this.tokens;t.includes(e)&&(this.tokens=t.filter(function(t){return t!=e}))},t.prototype.contains=function(t){return this.tokens.includes(t)},t}();t.TokenList=e,t.getControllerList=function(t){return new e(t,"data-controller")},t.getTargetList=function(t){return new e(t,"data-target")},t.getActionList=function(t){return new e(t,"data-action")}}(Stacks||(Stacks={}));__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(){var r="s-expandable-control:radio-off";function e(n){var t=n.target;t instanceof HTMLInputElement&&"INPUT"===t.nodeName&&"radio"===t.type&&document.querySelectorAll('input[type="radio"][name="'+t.name+'"]').forEach(function(t){if(t!==n.target){var e;try{e=new Event(r)}catch(t){(e=document.createEvent("Event")).initEvent(r,!0,!0)}t.dispatchEvent(e)}})}var n=0;function o(t){t?1===++n&&document.body.addEventListener("change",e):0===--n&&document.body.removeEventListener("change",e)}Stacks.application.register("s-expandable-control",function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable,this.events=["change",r],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable,this.events=["click","keydown"]),this.listener=this.listener.bind(this)},e.prototype._isCollapsedForClickable=function(){var t=this.controlledCollapsible;return t?!t.classList.contains("is-expanded"):"false"===this.element.getAttribute("aria-expanded")},e.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(e.prototype,"controlledCollapsible",{get:function(){var t=this.element.getAttribute("aria-controls");if(!t)throw"couldn't find controls";var e=document.getElementById(t);if(!e)throw"couldn't find controls";return e},enumerable:!0,configurable:!0}),e.prototype._dispatchShowHideEvent=function(t){this.triggerEvent(t?"show":"hide")},e.prototype._toggleClass=function(e){if(this.data.has("toggle-class")){var n=this.element.classList,t=this.data.get("toggle-class");if(!t)throw"couldn't find toggle class";t.split(/\s+/).forEach(function(t){n.toggle(t,!!e)})}},e.prototype.listener=function(t){var e;if(this.isCheckable)e=!this.element.checked;else{if("keydown"==t.type&&t instanceof KeyboardEvent&&13!=t.keyCode&&32!=t.keyCode)return;if(t.target!==t.currentTarget&&0<=["A","BUTTON"].indexOf(t.target.nodeName))return;e="true"===this.element.getAttribute("aria-expanded"),t.preventDefault(),"click"===t.type&&this.element.blur()}this.element.setAttribute("aria-expanded",e?"false":"true"),this.controlledCollapsible.classList.toggle("is-expanded",!e),this._dispatchShowHideEvent(!e),this._toggleClass(!e)},e.prototype.connect=function(){var e=this;if(this.events.forEach(function(t){e.element.addEventListener(t,e.listener)},this),this.isRadio&&o(!0),this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable){var t=this.controlledCollapsible;if(t){var n=!this.isCollapsed();n!==t.classList.contains("is-expanded")&&(t.classList.toggle("is-expanded",n),this._dispatchShowHideEvent(n),this._toggleClass(n))}}},e.prototype.disconnect=function(){var e=this;this.events.forEach(function(t){e.element.removeEventListener(t,e.listener)},this),this.isRadio&&o(!1)},e}(Stacks.StacksController))}();__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(r){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.connect=function(){this.validate()},e.prototype.disconnect=function(){this.unbindDocumentEvents()},e.prototype.toggle=function(){this._toggle()},e.prototype.show=function(){this._toggle(!0)},e.prototype.hide=function(){this._toggle(!1)},e.prototype.validate=function(){var t=this.data.get("return-element");if(t&&(this.returnElement=document.querySelector(t),!this.returnElement))throw"Unable to find element by return-element selector: "+t},e.prototype._toggle=function(t){var e=this,n=t,r="false"===this.modalTarget.getAttribute("aria-hidden");if(void 0===n&&(n=!r),!(n&&r||!n&&!r)){var o=this.triggerEvent(n?"show":"hide",{returnElement:this.returnElement});if(!o.defaultPrevented)this.returnElement=o.detail.returnElement,this.modalTarget.setAttribute("aria-hidden",n?"false":"true"),n?this.bindDocumentEvents():(this.unbindDocumentEvents(),this.focusReturnElement(),this.removeModalOnHide()),void 0!==this.modalTarget.ontransitionend?this.modalTarget.addEventListener("transitionend",function(){e.triggerEvent(n?"shown":"hidden")},{once:!0}):this.triggerEvent(n?"shown":"hidden")}},e.prototype.focusReturnElement=function(){var t=this;this.returnElement&&this.modalTarget.addEventListener("s-modal:hidden",function(){t.returnElement&&document.body.contains(t.returnElement)&&t.returnElement.focus()},{once:!0})},e.prototype.removeModalOnHide=function(){var t=this;"true"===this.data.get("remove-when-hidden")&&this.modalTarget.addEventListener("s-modal:hidden",function(){t.element.remove()},{once:!0})},e.prototype.handleFocusableElements=function(){var e=this,t=Array.from(this.modalTarget.querySelectorAll("[href], input, select, textarea, button, [tabindex]")).filter(function(t){return t.matches(":not([disabled]):not([tabindex='-1'])")});if(t.length){var n=t[0];this.hasInitialFocusTarget&&(n=this.initialFocusTarget),this.modalTarget.addEventListener("s-modal:shown",function(){n&&document.body.contains(n)&&n.focus()},{once:!0});var r=t[0],o=t[t.length-1];return this._boundTabTrap=this._boundTabTrap||function(t){e.modalTarget.contains(t.target)||(t.preventDefault(),r.focus()),t.target==r&&9===t.keyCode&&t.shiftKey&&(t.preventDefault(),o.focus()),t.target!=o||9!==t.keyCode||t.shiftKey||(t.preventDefault(),r.focus())},document.addEventListener("keydown",this._boundTabTrap),n}},e.prototype.bindDocumentEvents=function(){this._boundClickFn=this._boundClickFn||this.hideOnOutsideClick.bind(this),this._boundKeypressFn=this._boundKeypressFn||this.hideOnEscapePress.bind(this),document.addEventListener("click",this._boundClickFn),document.addEventListener("keyup",this._boundKeypressFn),this.handleFocusableElements()},e.prototype.unbindDocumentEvents=function(){document.removeEventListener("click",this._boundClickFn),document.removeEventListener("keyup",this._boundKeypressFn),document.removeEventListener("keydown",this._boundTabTrap)},e.prototype.hideOnOutsideClick=function(t){var e=t.target;this.modalTarget.querySelector(".s-modal--dialog").contains(e)||this._toggle(!1)},e.prototype.hideOnEscapePress=function(t){27===t.which&&"true"!==this.modalTarget.getAttribute("aria-hidden")&&this._toggle(!1)},e.targets=["modal","initialFocus"],e}(r.StacksController);function e(t,e){var n=r.application.getControllerForElementAndIdentifier(t,"s-modal");if(!n)throw"Unable to get s-modal controller from element";e?n.show():n.hide()}r.ModalController=t,r.showModal=function(t){e(t,!0)},r.hideModal=function(t){e(t,!1)}}(Stacks||(Stacks={})),Stacks.application.register("s-modal",Stacks.ModalController);__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(u){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"isVisible",{get:function(){var t=this.popoverElement;return!!t&&t.classList.contains("is-visible")},enumerable:!0,configurable:!0}),e.prototype.connect=function(){t.prototype.connect.call(this),this.validate(),this.isVisible&&this.initializePopper()},e.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),this.popper=null),t.prototype.disconnect.call(this)},e.prototype.toggle=function(){this.isVisible?this.hide():this.show()},e.prototype.show=function(){this.isVisible||this.triggerEvent("show").defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.popper.enableEventListeners(),this.scheduleUpdate(),this.shown())},e.prototype.hide=function(){this.isVisible&&(this.triggerEvent("hide").defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&this.popper.disableEventListeners(),this.hidden()))},e.prototype.shown=function(){this.bindDocumentEvents(),this.triggerEvent("shown")},e.prototype.hidden=function(){this.unbindDocumentEvents(),this.triggerEvent("hidden")},e.prototype.generatePopover=function(){return null},e.prototype.initializePopper=function(){this.popper=new Popper(this.referenceElement,this.popoverElement,{eventsEnabled:this.isVisible}),this.popper.options.placement=this.data.get("placement")||"bottom"},e.prototype.validate=function(){var t=this.data.get("reference-selector");if(this.referenceElement=this.element,t&&(this.referenceElement=this.element.querySelector(t),!this.referenceElement))throw"Unable to find element by reference selector: "+t;var e=this.referenceElement.getAttribute(this.popoverSelectorAttribute),n=null;if(e){if(!(n=document.getElementById(e)))throw"["+this.popoverSelectorAttribute+'="{POPOVER_ID}"] required'}else n=this.generatePopover();if(!n)throw"unable to find or generate popover element";this.popoverElement=n},e.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.scheduleUpdate()},e}(u.StacksController),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popoverSelectorAttribute="aria-controls",t}return __extends(t,e),t.prototype.connect=function(){e.prototype.connect.call(this),"true"===this.data.get("auto-show")&&(this.data.delete("auto-show"),this.show())},t.prototype.shown=function(){this.toggleOptionalClasses(!0),e.prototype.shown.call(this)},t.prototype.hidden=function(){this.toggleOptionalClasses(!1),e.prototype.hidden.call(this)},t.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("click",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},t.prototype.unbindDocumentEvents=function(){document.removeEventListener("click",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},t.prototype.hideOnOutsideClick=function(t){var e=t.target;this.referenceElement.contains(e)||this.popoverElement.contains(e)||this.hide()},t.prototype.hideOnEscapePress=function(t){27===t.which&&this.isVisible&&(this.popoverElement.contains(t.target)&&this.referenceElement.focus(),this.hide())},t.prototype.toggleOptionalClasses=function(e){if(this.data.has("toggle-class")){var n=this.referenceElement.classList;this.data.get("toggle-class").split(/\s+/).forEach(function(t){n.toggle(t,e)})}},t.targets=[],t}(u.BasePopoverController=t);function l(t){var e=u.getControllerList(t).contains("s-popover"),n=u.application.getControllerForElementAndIdentifier(t,"s-popover"),r=t.getAttribute("data-s-popover-reference-selector"),o=r?t.querySelector(r):t,i=o?o.getAttribute("aria-controls"):null;return[e,n,o,i?document.getElementById(i):null]}u.PopoverController=e,u.showPopover=function(t){var e=l(t),n=e[0],r=e[1];if(e[2],r)r.show();else{if(!n)throw'element does not have data-controller="s-popover"';t.setAttribute("data-s-popover-auto-show","true")}},u.hidePopover=function(t){var e=l(t),n=e[0],r=e[1],o=(e[2],e[3]);if(r)r.hide();else{if(!n)throw'element does not have data-controller="s-popover"';t.removeAttribute("data-s-popover-auto-show"),o&&o.classList.remove("is-visible")}},u.attachPopover=function(t,e,n){var r=l(t),o=(r[0],r[1],r[2]),i=r[3];if(i)throw'element already has popover with id="'+i.id+'"';if(!o)throw"element has invalid data-s-popover-reference-selector attribute";if("string"==typeof e){var s=document.createRange().createContextualFragment(e).children;if(1!==s.length)throw"popover should contain a single element";e=s[0]}var a=o.getAttribute("aria-controls"),c=e.id;if(!e.classList.contains("s-popover"))throw'popover should have the "s-popover" class but had class="'+e.className+'"';if(a&&a!==c)throw'element has aria-controls="'+a+'" but popover has id="'+c+'"';c||(c="--stacks-s-popover-"+Math.random().toString(36).substring(2,10),e.id=c),a||o.setAttribute("aria-controls",c),!e.parentElement&&t.parentElement&&o.insertAdjacentElement("afterend",e),u.getControllerList(t).add("s-popover"),n&&(n.toggleOnClick&&u.getActionList(o).add("click->s-popover#toggle"),n.placement&&t.setAttribute("data-s-popover-placement",n.placement),n.autoShow&&t.setAttribute("data-s-popover-auto-show","true"))},u.detachPopover=function(t){var e=l(t),n=e[0],r=e[1],o=e[2],i=e[3];return r&&r.hide(),i&&i.remove(),n&&(u.getControllerList(t).remove("s-popover"),o&&o.removeAttribute("aria-controls")),i}}(Stacks||(Stacks={})),Stacks.application.register("s-popover",Stacks.PopoverController);__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(){var t;function f(t,e){for(var n=[],r=t.children[0],o=[],i=[];r||i.some(function(t){return 0!==t});){var s=[];n.push(s);var a=0;if(r)for(var c=0;c<r.children.length;c++){for(;i[a];)i[a]--,s[a]=o[a],a++;var u=r.children[c];if(!(u instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(u).display){if(u===e)return a;for(var l=a+u.colSpan;a<l;a++)i[a]=u.rowSpan-1,o[a]=u,s[a]=u}}for(;a<o.length;)i[a]&&(i[a]--,s[a]=o[a]),a++;r&&(r=r.nextElementSibling)}return e?-1:n}Stacks.application.register("s-table",((t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setCurrentSort=function(e,r){if(["asc","desc","none"].indexOf(r)<0)throw"direction must be one of asc, desc, or none";var o=this;this.columnTargets.forEach(function(t){var n=t===e;t.classList.toggle("is-sorted",n&&"none"!==r),t.querySelectorAll(".js-sorting-indicator").forEach(function(t){var e=n?r:"none";t.classList.toggle("d-none",!t.classList.contains("js-sorting-indicator-"+e))}),n&&"none"!==r?o.setElementData(t,"sort-direction",r):o.removeElementData(t,"sort-direction")})},e.prototype.sort=function(t){var s=this,e=t.currentTarget;if(!(e instanceof HTMLTableCellElement))throw"invalid event target";var n=this.element,r=n.tBodies[0],a=function(t){if(!(t.parentElement&&t.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";var e=f(t.parentElement.parentElement,t);if("number"!=typeof e)throw"shouldn't happen";return e}(e);if(!(a<0)){var c,u=function(t){var e=f(t);if(!(e instanceof Array))throw"shouldn't happen";return e}(r),o="asc"===this.getElementData(e,"sort-direction")?-1:1,i=Array.from(n.tBodies[0].rows),l=!1,p=[];i.forEach(function(t,e){var n=s.getElementData(t,"sort-to");if("top"!==n)if("bottom"!==n){var r=u[e][a];if(r){var o=s.getElementData(r,"sort-val"),i="string"==typeof o?o:r.textContent.trim();""!==i&&parseInt(i,10)+""!==i&&(l=!0),p.push([i,e])}else p.push(["",e])}else c||(c=t)}),l||p.forEach(function(t){t[0]=""===t[0]?Number.MIN_VALUE:parseInt(t[0],10)}),p.sort(function(t,e){return t[0]>e[0]?1*o:t[0]<e[0]?-1*o:t[1]>e[1]?1:-1}),p.forEach(function(t){var e=i[t[1]];e.parentElement.removeChild(e),c?r.insertBefore(e,c):r.appendChild(e)}),this.setCurrentSort(e,1===o?"asc":"desc")}},e}(Stacks.StacksController)).targets=["column"],t))}();var Stacks;__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(r){var t=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.popoverSelectorAttribute="aria-describedby",t}return __extends(a,e),a.prototype.connect=function(){e.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents()},a.prototype.disconnect=function(){this.unbindMouseEvents(),e.prototype.disconnect.call(this)},a.prototype.show=function(){var t=r.application.getControllerForElementAndIdentifier(this.element,"s-popover");t&&t.isVisible||e.prototype.show.call(this)},a.prototype.applyTitleAttributes=function(){var t,e=this.data.get("html-title");if(e)t=document.createRange().createContextualFragment(e);else{var n=this.element.getAttribute("title");if(!n)return null;t=document.createTextNode(n)}this.data.delete("html-title"),this.element.removeAttribute("title");var r=this.element.getAttribute("aria-describedby");r||(r=a.generateId(),this.element.setAttribute("aria-describedby",r));var o=document.getElementById(r);if(!o){(o=document.createElement("div")).id=r,o.className="s-popover s-popover__tooltip pe-none",o.setAttribute("aria-hidden","true"),o.setAttribute("role","tooltip");var i=this.element.parentNode;i?i.insertBefore(o,this.element.nextSibling):document.body.appendChild(o)}var s=o.querySelector(".s-popover--arrow");return o.innerHTML="",o.appendChild(t),s?o.appendChild(s):o.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),o},a.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.generatePopover=function(){return this.applyTitleAttributes()},a.prototype.hideIfWithin=function(t){t.target.contains(this.referenceElement)&&this.hide()},a.prototype.bindMouseEvents=function(){this.boundShow=this.boundShow||this.show.bind(this),this.boundHide=this.boundHide||this.hide.bind(this),this.referenceElement.addEventListener("mouseover",this.boundShow),this.referenceElement.addEventListener("mouseout",this.boundHide)},a.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundShow),this.referenceElement.removeEventListener("mouseout",this.boundHide)},a.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},a.targets=[],a}(r.BasePopoverController);function o(t,e){e&&e.placement&&t.setAttribute("data-s-tooltip-placement",e.placement);var n=r.application.getControllerForElementAndIdentifier(t,"s-tooltip");n?n.applyTitleAttributes():r.getControllerList(t).add("s-tooltip")}r.TooltipController=t,r.setTooltipHtml=function(t,e,n){t.setAttribute("data-s-tooltip-html-title",e),t.removeAttribute("title"),o(t,n)},r.setTooltipText=function(t,e,n){t.setAttribute("title",e),t.removeAttribute("data-s-tooltip-html-title"),o(t,n)}}(Stacks||(Stacks={})),Stacks.application.register("s-tooltip",Stacks.TooltipController),Stacks._initializing=!1;